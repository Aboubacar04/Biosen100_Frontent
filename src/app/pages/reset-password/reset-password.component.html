<div class="h-screen w-screen flex overflow-hidden">

  <!-- ══════════════════════════════════════════════════════ -->
  <!-- LEFT — FORMULAIRE                                     -->
  <!-- ══════════════════════════════════════════════════════ -->
  <div class="w-full lg:w-1/2 flex flex-col bg-white relative">

    <!-- Subtle pattern background -->
    <div class="absolute inset-0 pointer-events-none opacity-[0.03]"
         style="background-image: radial-gradient(#15803D 1px, transparent 1px); background-size: 24px 24px;">
    </div>

    <!-- Green glow top-left -->
    <div class="absolute top-0 left-0 w-96 h-96 pointer-events-none"
         style="background: radial-gradient(circle at 0% 0%, rgba(21,128,61,0.06) 0%, transparent 60%);">
    </div>

    <!-- ── LOGO ─────────────────────────────────────────── -->
    <div class="relative z-10 h-56 sm:h-64 flex items-center justify-center shrink-0 px-8 sm:px-12">
      <img src="logo.jpg" alt="Biosen100" class="h-full w-auto object-contain" />
    </div>

    <!-- SÉPARATEUR -->
    <div class="relative z-10 mx-8 sm:mx-12 shrink-0"
         style="height: 1.5px; background: linear-gradient(90deg, transparent 0%, rgba(21,128,61,0.15) 30%, rgba(21,128,61,0.15) 70%, transparent 100%);">
    </div>

    <!-- ── CONTENU ──────────────────────────────────────── -->
    <div class="relative z-10 flex-1 flex flex-col justify-between px-8 sm:px-12 xl:px-20 py-6 sm:py-8 overflow-y-auto">

      <div>

        <!-- ── RETOUR ──────────────────────────────────── -->
        <a routerLink="/login"
           class="inline-flex items-center gap-2.5 text-xs sm:text-[13px] font-bold text-gray-400
                  hover:text-[#15803D] transition-all duration-200 mb-7 sm:mb-8 group w-fit
                  px-3 py-2 -ml-3 rounded-xl hover:bg-[#15803D]/5">
          <svg class="w-4 h-4 group-hover:-translate-x-1 transition-transform duration-200"
               viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
            <path d="M19 12H5M12 19l-7-7 7-7"/>
          </svg>
          Retour à la connexion
        </a>

        <!-- ── TITRE ───────────────────────────────────── -->
        <div class="flex items-center gap-4 mb-2">
          <div class="shrink-0 w-12 h-12 sm:w-14 sm:h-14 rounded-2xl flex items-center justify-center"
               style="background: rgba(21,128,61,0.08);">
            <svg class="w-6 h-6 sm:w-7 sm:h-7" viewBox="0 0 24 24" fill="none">
              <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"
                    fill="#15803D" fill-opacity="0.12" stroke="#15803D" stroke-width="2"
                    stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M9 12l2 2 4-4"
                    stroke="#15803D" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </div>
          <h1 class="text-2xl sm:text-[28px] font-black text-gray-900 tracking-tight leading-tight">
            Nouveau mot de passe
          </h1>
        </div>

        <p class="text-gray-400 text-sm sm:text-[15px] mb-7 sm:mb-8 pl-16 sm:pl-[74px]">
          Choisissez un mot de passe fort pour sécuriser votre compte.
        </p>

        <!-- ══ MESSAGE SUCCÈS ════════════════════════════ -->
        @if (successMessage) {
          <div class="mb-6 rounded-2xl overflow-hidden border border-[#15803D]/20"
               style="background: linear-gradient(135deg, #f0fdf4 0%, #f7fdf9 100%);
                      box-shadow: 0 2px 12px rgba(21,128,61,0.08);">
            <div class="flex items-center gap-3 px-4 sm:px-5 py-3.5">
              <div class="w-9 h-9 sm:w-10 sm:h-10 rounded-xl flex items-center justify-center shrink-0"
                   style="background: linear-gradient(135deg, #15803D 0%, #16a34a 100%);
                          box-shadow: 0 3px 10px rgba(21,128,61,0.30);">
                <svg class="w-4 h-4 sm:w-5 sm:h-5 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2.5">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M5 13l4 4L19 7"/>
                </svg>
              </div>
              <div class="flex-1 min-w-0">
                <p class="text-[11px] sm:text-xs font-black text-[#15803D] uppercase tracking-wider">Mot de passe réinitialisé</p>
                <p class="text-sm sm:text-[15px] font-semibold text-[#15803D] mt-0.5">{{ successMessage }}</p>
              </div>
              <div class="w-1 h-10 rounded-full shrink-0" style="background: linear-gradient(180deg, #15803D, #86efac);"></div>
            </div>
          </div>
        }

        <!-- ══ MESSAGE ERREUR ════════════════════════════ -->
        @if (errorMessage) {
          <div class="mb-6 rounded-2xl overflow-hidden border border-red-200"
               style="background: linear-gradient(135deg, #fef2f2 0%, #fff5f5 100%);
                      box-shadow: 0 2px 12px rgba(239,68,68,0.08);">
            <div class="flex items-center gap-3 px-4 sm:px-5 py-3.5">
              <div class="w-9 h-9 sm:w-10 sm:h-10 rounded-xl flex items-center justify-center shrink-0"
                   style="background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
                          box-shadow: 0 3px 10px rgba(239,68,68,0.30);">
                <svg class="w-4 h-4 sm:w-5 sm:h-5 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2.5">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12"/>
                </svg>
              </div>
              <div class="flex-1 min-w-0">
                <p class="text-[11px] sm:text-xs font-black text-red-500 uppercase tracking-wider">Erreur</p>
                <p class="text-sm sm:text-[15px] font-semibold text-red-700 mt-0.5">{{ errorMessage }}</p>
              </div>
              <div class="w-1 h-10 rounded-full shrink-0" style="background: linear-gradient(180deg, #ef4444, #fca5a5);"></div>
            </div>
          </div>
        }

        <!-- ══ FORMULAIRE ════════════════════════════════ -->
        <form [formGroup]="form" (ngSubmit)="onSubmit()">

          <!-- ── MOT DE PASSE ──────────────────────────── -->
          <div class="mb-5">
            <label class="block text-[11px] sm:text-xs font-black text-gray-500 mb-2.5 uppercase tracking-[0.10em]">
              Nouveau mot de passe
            </label>
            <div class="relative group">
              <div class="absolute left-4 sm:left-5 top-1/2 -translate-y-1/2 text-gray-400 pointer-events-none
                          group-focus-within:text-[#15803D] transition-colors duration-200">
                <svg class="w-[18px] h-[18px] sm:w-5 sm:h-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <rect x="3" y="11" width="18" height="11" rx="2" ry="2"/>
                  <path d="M7 11V7a5 5 0 0 1 10 0v4"/>
                </svg>
              </div>
              <input
                [type]="showPassword ? 'text' : 'password'"
                formControlName="password"
                placeholder="••••••••••••"
                class="w-full pl-12 sm:pl-14 pr-14 py-4 sm:py-[22px] bg-[#f7faf7] border-2 border-[#15803D]/10 rounded-2xl
                       text-sm sm:text-[15px] text-gray-800 placeholder-gray-400 transition-all duration-200 outline-none
                       focus:border-[#15803D]/40 focus:bg-white focus:shadow-[0_0_0_4px_rgba(21,128,61,0.06)]"
                [class.border-red-300]="password?.invalid && password?.touched"
                [class.bg-red-50]="password?.invalid && password?.touched"
              />
              <button type="button" (click)="showPassword = !showPassword"
                      class="absolute right-4 sm:right-5 top-1/2 -translate-y-1/2 text-gray-400
                             hover:text-[#15803D] transition-colors duration-200 p-1">
                @if (!showPassword) {
                  <svg class="w-5 h-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="12" cy="12" r="3"/>
                    <path d="M2 12s4-7 10-7 10 7 10 7-4 7-10 7S2 12 2 12z"/>
                  </svg>
                } @else {
                  <svg class="w-5 h-5" viewBox="0 0 20 20" fill="none">
                    <path d="M8.56016 8.56201C8.18514 8.93716 7.97452 9.44592 7.97461 9.97637C7.9747 10.5068 8.18551 11.0155 8.56066 11.3905C8.93581 11.7655 9.44457 11.9762 9.97501 11.9761C10.5055 11.976 11.0141 11.7652 11.3892 11.39M14.6561 14.6481C13.2533 15.5258 11.6298 15.986 9.9751 15.9751C6.3751 15.9751 3.3751 13.9751 0.975098 9.97513C2.2471 7.85513 3.6871 6.29713 5.2951 5.30113M8.1551 4.15513C8.75414 4.03386 9.36391 3.97355 9.9751 3.97513C13.5751 3.97513 16.5751 5.97513 18.9751 9.97513C18.3091 11.0851 17.5961 12.0421 16.8371 12.8451M0.975098 0.975098L18.9751 18.9751"
                          stroke="#ACB5BB" stroke-width="1.95" stroke-linecap="round" stroke-linejoin="round"/>
                  </svg>
                }
              </button>
            </div>
            @if (password?.invalid && password?.touched) {
              <p class="text-red-500 text-xs sm:text-[13px] mt-2 flex items-center gap-1.5 pl-1 font-semibold">
                <svg width="13" height="13" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <circle cx="12" cy="12" r="10"/>
                  <line x1="12" y1="8" x2="12" y2="12"/>
                  <line x1="12" y1="16" x2="12.01" y2="16"/>
                </svg>
                Minimum 6 caractères
              </p>
            }
          </div>

          <!-- ── CONFIRMER MOT DE PASSE ────────────────── -->
          <div class="mb-6">
            <label class="block text-[11px] sm:text-xs font-black text-gray-500 mb-2.5 uppercase tracking-[0.10em]">
              Confirmer le mot de passe
            </label>
            <div class="relative group">
              <div class="absolute left-4 sm:left-5 top-1/2 -translate-y-1/2 text-gray-400 pointer-events-none
                          group-focus-within:text-[#15803D] transition-colors duration-200">
                <svg class="w-[18px] h-[18px] sm:w-5 sm:h-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/>
                  <path d="M9 12l2 2 4-4"/>
                </svg>
              </div>
              <input
                [type]="showConfirm ? 'text' : 'password'"
                formControlName="password_confirmation"
                placeholder="••••••••••••"
                class="w-full pl-12 sm:pl-14 pr-14 py-4 sm:py-[22px] bg-[#f7faf7] border-2 border-[#15803D]/10 rounded-2xl
                       text-sm sm:text-[15px] text-gray-800 placeholder-gray-400 transition-all duration-200 outline-none
                       focus:border-[#15803D]/40 focus:bg-white focus:shadow-[0_0_0_4px_rgba(21,128,61,0.06)]"
                [class.border-red-300]="password_confirmation?.invalid && password_confirmation?.touched"
                [class.bg-red-50]="password_confirmation?.invalid && password_confirmation?.touched"
              />
              <button type="button" (click)="showConfirm = !showConfirm"
                      class="absolute right-4 sm:right-5 top-1/2 -translate-y-1/2 text-gray-400
                             hover:text-[#15803D] transition-colors duration-200 p-1">
                @if (!showConfirm) {
                  <svg class="w-5 h-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="12" cy="12" r="3"/>
                    <path d="M2 12s4-7 10-7 10 7 10 7-4 7-10 7S2 12 2 12z"/>
                  </svg>
                } @else {
                  <svg class="w-5 h-5" viewBox="0 0 20 20" fill="none">
                    <path d="M8.56016 8.56201C8.18514 8.93716 7.97452 9.44592 7.97461 9.97637C7.9747 10.5068 8.18551 11.0155 8.56066 11.3905C8.93581 11.7655 9.44457 11.9762 9.97501 11.9761C10.5055 11.976 11.0141 11.7652 11.3892 11.39M14.6561 14.6481C13.2533 15.5258 11.6298 15.986 9.9751 15.9751C6.3751 15.9751 3.3751 13.9751 0.975098 9.97513C2.2471 7.85513 3.6871 6.29713 5.2951 5.30113M8.1551 4.15513C8.75414 4.03386 9.36391 3.97355 9.9751 3.97513C13.5751 3.97513 16.5751 5.97513 18.9751 9.97513C18.3091 11.0851 17.5961 12.0421 16.8371 12.8451M0.975098 0.975098L18.9751 18.9751"
                          stroke="#ACB5BB" stroke-width="1.95" stroke-linecap="round" stroke-linejoin="round"/>
                  </svg>
                }
              </button>
            </div>
            @if (password_confirmation?.invalid && password_confirmation?.touched) {
              <p class="text-red-500 text-xs sm:text-[13px] mt-2 flex items-center gap-1.5 pl-1 font-semibold">
                <svg width="13" height="13" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <circle cx="12" cy="12" r="10"/>
                  <line x1="12" y1="8" x2="12" y2="12"/>
                  <line x1="12" y1="16" x2="12.01" y2="16"/>
                </svg>
                Minimum 6 caractères
              </p>
            }
          </div>

          <!-- ── BOUTON ────────────────────────────────── -->
          <button type="submit" [disabled]="form.invalid || loading"
                  class="w-full text-white py-4 sm:py-[22px] rounded-2xl font-bold text-sm sm:text-[15px]
                         tracking-widest uppercase transition-all duration-200
                         disabled:opacity-50 disabled:cursor-not-allowed
                         flex items-center justify-center gap-3 active:scale-[0.98]"
                  style="background: linear-gradient(145deg, #15803D 0%, #1a9d4a 100%);
                         box-shadow: 0 6px 24px rgba(21,128,61,0.30), 0 2px 6px rgba(21,128,61,0.15);">
            @if (loading) {
              <span class="w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"></span>
              <span>Réinitialisation...</span>
            } @else {
              <span>Réinitialiser</span>
              <svg class="w-[18px] h-[18px]" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
                <path d="M5 12h14M12 5l7 7-7 7"/>
              </svg>
            }
          </button>

        </form>

        <!-- ── INFO SÉCURITÉ ───────────────────────────── -->
        <div class="flex items-center gap-4 my-6">
          <div class="flex-1 h-px" style="background: rgba(21,128,61,0.08);"></div>
          <span class="text-[11px] sm:text-xs font-bold text-gray-400 uppercase tracking-widest">Sécurité</span>
          <div class="flex-1 h-px" style="background: rgba(21,128,61,0.08);"></div>
        </div>

        <div class="flex items-center justify-center gap-4 sm:gap-6">
          <div class="flex items-center gap-2 text-gray-400">
            <svg class="w-4 h-4 text-[#15803D]/50" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
              <path stroke-linecap="round" stroke-linejoin="round"
                    d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"/>
            </svg>
            <span class="text-[11px] sm:text-xs font-semibold">Minimum 6 caractères</span>
          </div>
          <div class="w-1 h-1 rounded-full bg-gray-300"></div>
          <div class="flex items-center gap-2 text-gray-400">
            <svg class="w-4 h-4 text-[#15803D]/50" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
              <path stroke-linecap="round" stroke-linejoin="round"
                    d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"/>
            </svg>
            <span class="text-[11px] sm:text-xs font-semibold">Chiffrement sécurisé</span>
          </div>
        </div>

      </div>

      <!-- ── FOOTER ────────────────────────────────────── -->
      <div class="pt-5 mt-6 shrink-0" style="border-top: 1px solid rgba(21,128,61,0.06);">
        <p class="text-xs sm:text-[13px] text-gray-300 text-center font-medium">
          © 2026 Biosen100 · Tous droits réservés
        </p>
      </div>

    </div>
  </div>

  <!-- ══════════════════════════════════════════════════════ -->
  <!-- RIGHT — IMAGE (INCHANGÉ)                              -->
  <!-- ══════════════════════════════════════════════════════ -->
  <div class="hidden lg:block w-1/2 relative overflow-hidden">
    <img src="imageLogin.png" alt="Biosen100" class="w-full h-full object-cover" />
    <div class="absolute inset-0 flex flex-col justify-end p-12"></div>
  </div>

</div>
